{% extends "layouts/base.html.twig" %}
{% import "components/forms.html.twig" as forms %}
{% import "components/ui.html.twig" as ui %}

{% block title %}Редагувати запис #{{ appointment.id }} - Клініка{% endblock %}

{% block body %}
    <div class="ui segment">
        <h2 class="ui header">Редагувати запис #{{ appointment.id }}</h2>
        <div class="ui divider"></div>

        <form class="ui form" method="POST" action="/appointments/edit?id={{ appointment.id }}">
            <input type="hidden" name="id" value="{{ appointment.id }}">
            <div class="two fields">
                {{ forms.select('patient_id', 'Пацієнт', patients, appointment.patient_id, errors.patient_id ?? null, {'required': 'required'})
 }}
                {{ forms.select('doctor_id', 'Лікар', doctors, appointment.doctor_id, errors.doctor_id ?? null, {'required': 'required'})
 }}
            </div>
            <div class="two fields">
                {{ forms.input('start_time', 'Час початку', old.start_time ?? appointment.start_time|date('Y-m-d\\TH:i'), 'datetime-local', '', errors.start_time ?? null, {'required': 'required'})
 }}
                {{ forms.input('end_time', 'Час закінчення', old.end_time ?? appointment.end_time|date('Y-m-d\\TH:i'), 'datetime-local', '', errors.end_time ?? null, {'required': 'required'})
 }}
            </div>
            <div class="field">
                {{ forms.select('status', 'Статус', {'scheduled': 'Заплановано', 'completed': 'Виконано', 'cancelled': 'Скасовано', 'no-show': 'Не з\'явився'}, old.status ?? appointment.status, errors.status ?? null, {'required': 'required'})
 }}
            </div>
            {{ forms.textarea('notes', 'Примітки', old.notes ?? appointment.notes, 'Додаткові примітки до запису') }}

            {{ ui.button('Зберегти зміни', 'primary', 'large', 'save') }}
            <a href="/appointments/show?id={{ appointment.id }}" class="ui button">Скасувати</a>
        </form>
    </div>
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script>
        $(document).ready(function() {
            $('.ui.dropdown').dropdown();
        });
    </script>
{% endblock %}

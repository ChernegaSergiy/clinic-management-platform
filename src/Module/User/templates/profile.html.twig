{% extends "layouts/base.html.twig" %}

{% block title %}Мій профіль{% endblock %}

{% block body %}
    <div class="ui segments">
        <div class="ui segment">
            <h1 class="ui header">Мій профіль</h1>
        </div>
        <div class="ui secondary segment">
            {% if successMessage %}
                <div class="ui success message">
                    <i class="close icon"></i>
                    <div class="header">Успіх!</div>
                    <p>{{ successMessage }}</p>
                </div>
            {% endif %}

            <div class="ui list">
                <div class="item">
                    <i class="user icon"></i>
                    <div class="content">
                        <strong>Ім'я:</strong> {{ user.first_name }} {{ user.last_name }}
                    </div>
                </div>
                <div class="item">
                    <i class="envelope icon"></i>
                    <div class="content">
                        <strong>Email:</strong> {{ user.email }}
                    </div>
                </div>
            </div>

            <div class="ui divider"></div>

            <h2 class="ui header">Зв'язані акаунти</h2>
            <div class="ui relaxed divided list">
                {% for config in authConfigs %}
                    <div class="item">
                        <div class="right floated content">
                            {% if user.provider == config.provider %}
                                <form action="/user/profile/unlink-provider" method="POST" onsubmit="return confirm('Ви впевнені, що хочете відв\'язати свій {{ config.provider|capitalize }} акаунт?');">
                                    <button type="submit" class="ui small red button">Відв'язати</button>
                                </form>
                            {% else %}
                                <a href="/login/{{ config.provider }}" class="ui button {{ config.provider }}">
                                    <i class="{{ config.provider }} icon"></i>
                                    Прив'язати {{ config.provider|capitalize }}
                                </a>
                            {% endif %}
                        </div>
                        <i class="large {{ config.provider }} middle aligned icon"></i>
                        <div class="content">
                            <div class="header">{{ config.provider|capitalize }}</div>
                            <div class="description">
                                {% if user.provider == config.provider %}
                                    Акаунт прив'язано
                                {% else %}
                                    Не прив'язано
                                {% endif %}
                            </div>
                        </div>
                    </div>
                {% else %}
                    <p>Немає доступних провайдерів для прив'язки.</p>
                {% endfor %}
            </div>
        </div>
    </div>
{% endblock %}

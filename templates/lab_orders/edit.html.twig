{% extends "layouts/base.html.twig" %}
{% import "components/forms.html.twig" as forms %}
{% import "components/ui.html.twig" as ui %}

{% block title %}Редагувати лабораторне замовлення #{{ order.id }} - Клініка{% endblock %}

{% block body %}
    <div class="ui segment">
        <h2 class="ui header">Редагувати лабораторне замовлення #{{ order.id }}</h2>
        <div class="ui divider"></div>

        <form class="ui form" method="POST" action="/lab-orders/edit?id={{ order.id }}">
            <p><strong>Пацієнт:</strong> {{ order.patient_name }}</p>
            <p><strong>Лікар:</strong> {{ order.doctor_name }}</p>
            <p><strong>Медичний запис ID:</strong> {{ order.medical_record_id }}</p>
            <div class="ui divider"></div>

            {{ forms.input('order_code', 'Код замовлення', old.order_code ?? order.order_code, 'text', 'Наприклад, Загальний аналіз крові', errors.order_code ?? null, {'required': 'required'}) }}
            {{ forms.select('status', 'Статус', {'ordered': 'Замовлено', 'in_progress': 'В процесі', 'completed': 'Виконано', 'cancelled': 'Скасовано'}, old.status ?? order.status, errors.status ?? null, {'required': 'required'}) }}
            {{ forms.textarea('results', 'Результати', old.results ?? order.results, 'Введіть результати лабораторного дослідження', errors.results ?? null) }}
            {{ forms.textarea('notes', 'Примітки', old.notes ?? order.notes, 'Додаткові примітки до замовлення', errors.notes ?? null) }}

            {{ ui.button('Зберегти зміни', 'primary', 'large', 'save') }}
            <a href="/lab-orders/show?id={{ order.id }}" class="ui button">Скасувати</a>
        </form>
    </div>
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script>
        $(document).ready(function() {
            $('.ui.dropdown').dropdown();
        });
    </script>
{% endblock %}

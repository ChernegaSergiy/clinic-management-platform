{% macro input(name, label, value = '', type = 'text', placeholder = '', error = '', attributes = {}) %}
    <div class="field {% if error %}error{% endif %}">
        <label for="{{ name }}">{{ label }}</label>
        <input type="{{ type }}" id="{{ name }}" name="{{ name }}" value="{{ value }}" placeholder="{{ placeholder }}" {{ _self.html_attributes(attributes) }}>
        {% if error %}<div class="ui basic red pointing label">{{ error }}</div>{% endif %}
    </div>
{% endmacro %}

{% macro textarea(name, label, value = '', placeholder = '', error = '', attributes = {}) %}
    <div class="field {% if error %}error{% endif %}">
        <label for="{{ name }}">{{ label }}</label>
        <textarea id="{{ name }}" name="{{ name }}" placeholder="{{ placeholder }}" {{ _self.html_attributes(attributes) }}>{{ value }}</textarea>
        {% if error %}<div class="ui basic red pointing label">{{ error }}</div>{% endif %}
    </div>
{% endmacro %}

{% macro select(name, label, options, selected = '', error = '', attributes = {}) %}
    <div class="field {% if error %}error{% endif %}">
        <label for="{{ name }}">{{ label }}</label>
        <select id="{{ name }}" name="{{ name }}" class="ui dropdown" {{ _self.html_attributes(attributes) }}>
            {% for option_value, option_label in options %}
                <option value="{{ option_value }}" {% if option_value == selected %}selected{% endif %}>{{ option_label }}</option>
            {% endfor %}
        </select>
        {% if error %}<div class="ui basic red pointing label">{{ error }}</div>{% endif %}
    </div>
{% endmacro %}

{% macro checkbox(name, label, checked = false, attributes = {}) %}
    <div class="field">
        <div class="ui checkbox">
            <input type="checkbox" id="{{ name }}" name="{{ name }}" {% if checked %}checked{% endif %} {{ _self.html_attributes(attributes) }}>
            <label for="{{ name }}">{{ label }}</label>
        </div>
    </div>
{% endmacro %}

{% macro html_attributes(attributes) %}
    {% for key, value in attributes %}
        {{ key }}="{{ value }}"
    {% endfor %}
{% endmacro %}

{% macro prescription_item(index, item = {}, errors = {}) %}
    <div class="fields" data-item-index="{{ index }}">
        <div class="eight wide field {% if errors['items['~index~'][medication_name]'] %}error{% endif %}">
            <label>Назва медикаменту</label>
            <input type="text" name="items[{{ index }}][medication_name]" placeholder="Назва медикаменту" value="{{ item.medication_name ?? '' }}" required>
            {% if errors['items['~index~'][medication_name]'] %}<div class="ui red basic pointing label">{{ errors['items['~index~'][medication_name]'] | first }}</div>{% endif %}
        </div>
        <div class="three wide field {% if errors['items['~index~'][dosage]'] %}error{% endif %}">
            <label>Дозування</label>
            <input type="text" name="items[{{ index }}][dosage]" placeholder="Дозування" value="{{ item.dosage ?? '' }}" required>
            {% if errors['items['~index~'][dosage]'] %}<div class="ui red basic pointing label">{{ errors['items['~index~'][dosage]'] | first }}</div>{% endif %}
        </div>
        <div class="three wide field {% if errors['items['~index~'][frequency]'] %}error{% endif %}">
            <label>Частота</label>
            <input type="text" name="items[{{ index }}][frequency]" placeholder="Частота" value="{{ item.frequency ?? '' }}" required>
            {% if errors['items['~index~'][frequency]'] %}<div class="ui red basic pointing label">{{ errors['items['~index~'][frequency]'] | first }}</div>{% endif %}
        </div>
        <div class="one wide field">
            <label>&nbsp;</label>
            <button type="button" class="ui red icon button remove-item"><i class="trash icon"></i></button>
        </div>
    </div>
{% endmacro %}

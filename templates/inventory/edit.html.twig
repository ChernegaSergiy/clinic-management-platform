{% extends "layouts/base.html.twig" %}
{% import "components/forms.html.twig" as forms %}
{% import "components/ui.html.twig" as ui %}

{% block title %}Редагувати позицію складу #{{ item.id }} - Клініка{% endblock %}

{% block body %}
    <div class="ui segment">
        <h2 class="ui header">Редагувати позицію складу #{{ item.id }}</h2>
        <div class="ui divider"></div>

        <form class="ui form" method="POST" action="/inventory/edit?id={{ item.id }}">
            <div class="two fields">
                {{ forms.input('name', 'Назва', old.name ?? item.name, 'text', 'Назва позиції', errors.name ?? null, {'required': 'required'}) }}
                {{ forms.input('inn', 'INN (Міжнародна непатентована назва)', old.inn ?? item.inn, 'text', 'INN', errors.inn ?? null) }}
            </div>
            {{ forms.textarea('description', 'Опис', old.description ?? item.description, 'Детальний опис позиції', errors.description ?? null) }}
            <div class="three fields">
                {{ forms.input('batch_number', 'Номер партії', old.batch_number ?? item.batch_number, 'text', 'Номер партії', errors.batch_number ?? null) }}
                {{ forms.input('expiry_date', 'Термін придатності', old.expiry_date ?? item.expiry_date, 'date', '', errors.expiry_date ?? null) }}
                {{ forms.input('supplier', 'Постачальник', old.supplier ?? item.supplier, 'text', 'Назва постачальника', errors.supplier ?? null) }}
            </div>
            <div class="three fields">
                {{ forms.input('cost', 'Вартість (за одиницю)', old.cost ?? item.cost, 'number', '0.00', errors.cost ?? null, {'step': '0.01'}) }}
                {{ forms.input('quantity', 'Кількість', old.quantity ?? item.quantity, 'number', '0', errors.quantity ?? null, {'required': 'required'}) }}
                {{ forms.input('min_stock_level', 'Мінімальний рівень запасу', old.min_stock_level ?? item.min_stock_level, 'number', '0', errors.min_stock_level ?? null) }}
            </div>
            <div class="field">
                {{ forms.input('max_stock_level', 'Максимальний рівень запасу', old.max_stock_level ?? item.max_stock_level, 'number', '0', errors.max_stock_level ?? null) }}
            </div>
            {{ forms.input('location', 'Місце зберігання', old.location ?? item.location, 'text', 'Наприклад, Склад 1, полиця А', errors.location ?? null) }}

            {{ ui.button('Зберегти зміни', 'primary', 'large', 'save') }}
            <a href="/inventory/show?id={{ item.id }}" class="ui button">Скасувати</a>
        </form>
    </div>
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script>
        $(document).ready(function() {
            $('.ui.dropdown').dropdown();
        });
    </script>
{% endblock %}
